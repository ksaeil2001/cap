ì´ ì½”ë“œëŠ” React ì•±ì˜ ì‹¤ì œ API ì—†ì´ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

ğŸš€ íŒŒì¼ ê²½ë¡œ: src/api/mockRecommend.ts
// src/api/mockRecommend.ts

import { UserInfo } from '../stores/useUserInfoStore';

// ìŒì‹ ì•„ì´í…œ íƒ€ì… ì •ì˜
interface FoodItem {
  foodId: number;
  name: string;
  kcal: number;
  protein: number;
  fat: number;
  carbs: number;
  price: number;
  tags: string[];
}

// ì˜ì–‘ ìš”ì•½ íƒ€ì… ì •ì˜
interface NutritionSummary {
  calories: {
    target: number;
    actual: number;
  };
  protein: {
    target: number;
    actual: number;
  };
  fat: {
    target: number;
    actual: number;
  };
  carbs: {
    target: number;
    actual: number;
  };
  budget: {
    target: number;
    actual: number;
  };
  allergy: boolean;
}

// Recommend ì‘ë‹µ íƒ€ì… ì •ì˜
interface RecommendResponse {
  meals: FoodItem[][];
  summary: NutritionSummary;
  fallback: boolean;
}

// Mock ìŒì‹ ë°ì´í„° ìƒ˜í”Œ (ì„ì˜ë¡œ êµ¬ì„±)
const mockFoods: FoodItem[] = [
  {
    foodId: 1,
    name: 'Grilled Chicken Salad',
    kcal: 350,
    protein: 30,
    fat: 15,
    carbs: 20,
    price: 7000,
    tags: ['healthy', 'high-protein'],
  },
  {
    foodId: 2,
    name: 'Oatmeal with Fruits',
    kcal: 250,
    protein: 10,
    fat: 5,
    carbs: 45,
    price: 5000,
    tags: ['healthy', 'fiber-rich'],
  },
  {
    foodId: 3,
    name: 'Beef Steak',
    kcal: 500,
    protein: 40,
    fat: 30,
    carbs: 10,
    price: 12000,
    tags: ['high-protein'],
  },
  {
    foodId: 4,
    name: 'Avocado Toast',
    kcal: 300,
    protein: 8,
    fat: 15,
    carbs: 35,
    price: 6000,
    tags: ['healthy', 'vegetarian'],
  },
  {
    foodId: 5,
    name: 'Protein Smoothie',
    kcal: 200,
    protein: 25,
    fat: 2,
    carbs: 20,
    price: 4000,
    tags: ['healthy', 'quick'],
  },
];

// Mock ì¶”ì²œ API í•¨ìˆ˜
export const mockRecommend = async (
  userInfo: UserInfo,
): Promise<RecommendResponse> => {
  // ë‹¨ìˆœ ëª¨ì˜ ê³„ì‚°: ê° ë¼ë‹ˆì— ìŒì‹ ë¬´ì‘ìœ„ ë°°ì •
  const meals: FoodItem[][] = [];
  for (let i = 0; i < userInfo.mealCount; i++) {
    meals.push([mockFoods[i % mockFoods.length]]);
  }

  // ì‹¤ì œ ê³„ì‚°ëœ ì˜ì–‘ì†Œ í•©ì‚° (ê°„ë‹¨í•œ ë”ë¯¸ ê³„ì‚°)
  const actualCalories = meals.flat().reduce((sum, food) => sum + food.kcal, 0);
  const actualProtein = meals.flat().reduce((sum, food) => sum + food.protein, 0);
  const actualFat = meals.flat().reduce((sum, food) => sum + food.fat, 0);
  const actualCarbs = meals.flat().reduce((sum, food) => sum + food.carbs, 0);
  const actualBudget = meals.flat().reduce((sum, food) => sum + food.price, 0);

  // ì‚¬ìš©ì ì •ë³´ë¡œë¶€í„° ëª©í‘œ ì˜ì–‘ì†Œ ê°„ë‹¨íˆ ì„¤ì • (ì‹¤ì œ êµ¬í˜„ ì‹œ ê³ ë„í™” í•„ìš”)
  const targetCalories = userInfo.goal === 'weight-loss' ? 1500 : 2200;
  const targetProtein = userInfo.weight * (userInfo.goal === 'muscle-gain' ? 2 : 1.5);
  const targetFat = (targetCalories * 0.25) / 9;
  const targetCarbs = (targetCalories * 0.5) / 4;

  // ì•ŒëŸ¬ì§€ í¬í•¨ ì—¬ë¶€ ê°„ë‹¨ ì²˜ë¦¬ (ëª¨ì˜)
  const hasAllergyConflict = meals.flat().some(food =>
    userInfo.allergies.some(allergy => food.name.toLowerCase().includes(allergy.toLowerCase())),
  );

  // fallback ì—¬ë¶€ ì„¤ì • (ì˜ˆì‚° ì´ˆê³¼ ë“± ê°„ë‹¨ ì¡°ê±´ìœ¼ë¡œ ëª¨ì˜ ì„¤ì •)
  const fallback = actualBudget > userInfo.budget;

  const summary: NutritionSummary = {
    calories: { target: targetCalories, actual: actualCalories },
    protein: { target: targetProtein, actual: actualProtein },
    fat: { target: targetFat, actual: actualFat },
    carbs: { target: targetCarbs, actual: actualCarbs },
    budget: { target: userInfo.budget, actual: actualBudget },
    allergy: hasAllergyConflict,
  };

  // ì§€ì—° ì‹œê°„ ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œ API í˜¸ì¶œ ëŠë‚Œì„ ì£¼ê¸° ìœ„í•´)
  await new Promise(resolve => setTimeout(resolve, 500));

  return {
    meals,
    summary,
    fallback,
  };
};
ğŸš€ ì‚¬ìš© ì˜ˆì‹œ (React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©)
import React, { useEffect } from 'react';
import { mockRecommend } from '../api/mockRecommend';
import { useUserInfoStore } from '../stores/useUserInfoStore';

const RecommendTest: React.FC = () => {
  const userInfo = useUserInfoStore(state => state.userInfo);

  useEffect(() => {
    const fetchRecommendations = async () => {
      if (!userInfo) return;

      const response = await mockRecommend(userInfo);
      console.log('Mock Recommendations:', response);
    };

    fetchRecommendations();
  }, [userInfo]);

  return <div>Check console for mock recommendation results.</div>;
};

export default RecommendTest;
ğŸ“Œ ì½”ë“œ íŠ¹ì§• ë° ìš©ë„
ë¡œì»¬ í™˜ê²½ì—ì„œ API ì—†ì´ ì‹ë‹¨ ì¶”ì²œ ê¸°ëŠ¥ì„ ëª¨ì˜ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

Zustand ìƒíƒœì™€ ê°™ì€ UserInfo íƒ€ì… ê¸°ë°˜ìœ¼ë¡œ ì…ë ¥ ì²˜ë¦¬

ì‹¤ì œ API í˜¸ì¶œê³¼ ìœ ì‚¬í•œ ì§€ì—° ì‹œê°„ ë° ì‘ë‹µ êµ¬ì¡° ì œê³µ

ê°œë°œ ì´ˆê¸° ë‹¨ê³„ì—ì„œ UI ë° ë¡œì§ í…ŒìŠ¤íŠ¸ì— ì´ìƒì ì…ë‹ˆë‹¤.