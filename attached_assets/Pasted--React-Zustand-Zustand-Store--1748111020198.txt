ë‹¤ìŒì€ ëª…í™•í•œ íƒ€ì… ì •ì˜ì™€ ìƒíƒœ ê´€ë¦¬ ë°©ë²•ì„ í¬í•¨í•œ
React + Zustand í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¶”ì²œ ê²°ê³¼ ê´€ë¦¬ìš© Zustand Storeì˜ ì „ì²´ ì½”ë“œì…ë‹ˆë‹¤.

âœ… Zustand Store ì½”ë“œ ì „ì²´ êµ¬í˜„ (useRecommendStore.ts)
ê²½ë¡œ: src/stores/useRecommendStore.ts

import { create } from 'zustand';

// ê°œë³„ ìŒì‹ ì•„ì´í…œ íƒ€ì… ì •ì˜
export interface FoodItem {
  foodId: number;
  name: string;
  kcal: number;
  protein: number;
  fat: number;
  carbs: number;
  price: number;
  tags: string[];
}

// ì˜ì–‘ ìš”ì•½ íƒ€ì… ì •ì˜
export interface NutritionSummary {
  calories: {
    target: number;
    actual: number;
  };
  protein: {
    target: number;
    actual: number;
  };
  fat: {
    target: number;
    actual: number;
  };
  carbs: {
    target: number;
    actual: number;
  };
  budget: {
    target: number;
    actual: number;
  };
  allergy: boolean;
}

// Recommend Storeì˜ ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface RecommendStore {
  meals: FoodItem[][];
  summary: NutritionSummary | null;
  fallback: boolean;
  selectedFoods: FoodItem[];
  setRecommendations: (meals: FoodItem[][], summary: NutritionSummary, fallback: boolean) => void;
  selectFood: (food: FoodItem) => void;
  removeFood: (foodId: number) => void;
  reset: () => void;
}

// ì´ˆê¸° ìƒíƒœ ê°’
const initialState = {
  meals: [],
  summary: null,
  fallback: false,
  selectedFoods: [],
};

// Zustand store ìƒì„±
export const useRecommendStore = create<RecommendStore>((set) => ({
  ...initialState,

  // API ê²°ê³¼ ìƒíƒœ ì„¤ì •
  setRecommendations: (meals, summary, fallback) =>
    set(() => ({
      meals,
      summary,
      fallback,
      selectedFoods: [], // ìƒˆë¡œìš´ ì¶”ì²œì´ ë“¤ì–´ì˜¬ ê²½ìš° ì„ íƒ ìŒì‹ ì´ˆê¸°í™”
    })),

  // ìŒì‹ ì„ íƒ ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸
  selectFood: (food) =>
    set((state) => ({
      selectedFoods: state.selectedFoods.find((f) => f.foodId === food.foodId)
        ? state.selectedFoods // ì´ë¯¸ ì„ íƒëœ ìŒì‹ì€ ì¤‘ë³µ ì¶”ê°€ ë°©ì§€
        : [...state.selectedFoods, food],
    })),

  // ìŒì‹ ì„ íƒ ì·¨ì†Œ ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸
  removeFood: (foodId) =>
    set((state) => ({
      selectedFoods: state.selectedFoods.filter((food) => food.foodId !== foodId),
    })),

  // ìƒíƒœë¥¼ ì´ˆê¸° ê°’ìœ¼ë¡œ ë¦¬ì…‹
  reset: () => set(() => ({ ...initialState })),
}));
ğŸš€ Zustand Storeì˜ ìƒíƒœ ê´€ë¦¬ ë°©ì‹ ì„¤ëª…
Zustand ìƒíƒœ (RecommendStore)ì˜ êµ¬ì„± ìš”ì†Œ:

meals: AIê°€ ì¶”ì²œí•œ ë¼ë‹ˆë³„ ìŒì‹ ë¦¬ìŠ¤íŠ¸ (ë°°ì—´ í˜•íƒœ)

summary: ì¶”ì²œë°›ì€ ìŒì‹ ë¦¬ìŠ¤íŠ¸ì˜ ì˜ì–‘ ì„±ë¶„ ìš”ì•½ ë°ì´í„°

fallback: ì¶”ì²œ ì¡°ê±´ì´ ê¹Œë‹¤ë¡œì›Œ ëŒ€ì²´ ì‹ë‹¨ì´ ì œê³µëœ ê²½ìš° true

selectedFoods: ì‚¬ìš©ìê°€ ì§ì ‘ ì„ íƒí•œ ìŒì‹ ë¦¬ìŠ¤íŠ¸ (ìƒì„¸ë³´ê¸° í›„ ì„ íƒ ì‹œ ì¶”ê°€)

ğŸ¯ Zustand Store ì‚¬ìš©ë²• ì˜ˆì‹œ (ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ)
import React, { useEffect } from 'react';
import axios from 'axios';
import { useRecommendStore } from '../stores/useRecommendStore';
import { useUserInfoStore } from '../stores/useUserInfoStore';

const RecommendPage: React.FC = () => {
  const { meals, summary, selectedFoods, setRecommendations, selectFood, removeFood } =
    useRecommendStore();

  const userInfo = useUserInfoStore((state) => state.userInfo);

  useEffect(() => {
    const fetchRecommendations = async () => {
      if (!userInfo) return;

      const response = await axios.post('/api/recommend', userInfo);
      setRecommendations(response.data.meals, response.data.summary, response.data.fallback);
    };

    fetchRecommendations();
  }, [userInfo, setRecommendations]);

  const handleSelect = (foodId: number) => {
    const foodItem = meals.flat().find((food) => food.foodId === foodId);
    if (foodItem) selectFood(foodItem);
  };

  const handleRemove = (foodId: number) => {
    removeFood(foodId);
  };

  return (
    <div>
      <h2>Recommended Meals</h2>
      {meals.flat().map((food) => (
        <div key={food.foodId}>
          <span>{food.name}</span>
          <button onClick={() => handleSelect(food.foodId)}>Select</button>
          <button onClick={() => handleRemove(food.foodId)}>Remove</button>
        </div>
      ))}

      <h3>Selected Foods</h3>
      {selectedFoods.map((food) => (
        <div key={food.foodId}>{food.name}</div>
      ))}

      <pre>{JSON.stringify(summary, null, 2)}</pre>
    </div>
  );
};

export default RecommendPage;
ğŸ“Œ êµ¬í˜„ ì£¼ìš” íŠ¹ì§• ë° ì¥ì 
ëª…í™•í•˜ê³  ê°•ë ¥í•œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ìƒíƒœ íƒ€ì… ì•ˆì •ì„± ì œê³µ

ìƒíƒœ ì„¤ì •(set), ìŒì‹ ì„ íƒ(select), ì œê±°(remove), ì´ˆê¸°í™”(reset)ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬ ê°€ëŠ¥

React ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ì‰½ê²Œ ì ‘ê·¼ ë° ê´€ë¦¬ ê°€ëŠ¥í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

ì¤‘ë³µ ìŒì‹ ì„ íƒ ë°©ì§€, ì¶”ì²œ ì—…ë°ì´íŠ¸ ì‹œ ìë™ ì„ íƒ ì´ˆê¸°í™” ë“± ë¡œì§ í¬í•¨ìœ¼ë¡œ ì‚¬ìš©ì„± ë†’ì„